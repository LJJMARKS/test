### 构造函数 default explicit

------

##### **常用的四种构造函数：**

1. 默认构造函数
2. 初始化构造函数
3. 赋值拷贝构造函数
4. 转换构造函数  （后面再学习）
  
```c++
//以Student类举例
class Student
{
public:
    //默认构造函数 没有任何参数
    Student()
    {
       num=1001;
       age=18;       
    }
    //初始化构造函数 有参数
    Student(int n,int a):num(n),age(a){}
    //复制（拷贝）构造函数
    Student(Student &b):num(b.num),age(b.age){}
    int num;
    int age;
};
int main()
{
    //用默认构造函数初始化对象S1
    Student s1;
    //用初始化构造函数初始化对象S2
    Student s2(1002,18);
    //用拷贝构造函数初始化对象s3
    Student s3(s2);
    return 0;
}

```
--- -
##### **default 关键字**

​		C++ 的类有四类特殊成员函数，它们分别是：默认构造函数、析构函数、拷贝构造函数以及拷贝赋值运算符。这些类的特殊成员函数负责创建、初始化、销毁，或者拷贝类的对象。如果==程序员没有显式地为一个类定义某个特殊成员函数，而又需要用到该特殊成员函数时，则编译器会隐式的为这个类生成一个默认的特殊成员函数==。例如：
```c++
class X
{ 
private: 
    int a; 
}; 
 
X x;

```

​		程序员并没有定义类 X 的默认构造函数，但是在创建类 X 的对象 x 的时候，又需要用到类 X 的默认构造函数，此时，编译器会隐式的为类 X 生成一个默认构造函数。该自动生成的默认构造函数没有参数，包含一个空的函数体，即 X::X（）{ }。虽然自动生成的默认构造函数仅有一个空函数体，但是它仍可用来成功创建类 X 的对象 x，程序也可以编译通过。但是，==如果程序员为类 X 显式的自定义了非默认构造函数，却没有定义默认构造函数的时候==，下面程序将会出现编译错误：

```class X{ 
class X
{
private: 
	int a;
public: 
	X(int i){ a = i; }     
}; 
 
X x;  // 错误 , 默认构造函数 X::X() 不存在
```

​		编译出错的原因在于类 `X` 已经有了用户自定义的构造函数，所以编译器将不再会为它隐式的生成默认构造函数。如果需要用到默认构造函数来创建类的对象时，程序员必须自己显式的定义默认构造函数。例如：

```c++
class X
{ 
private: 
	int a; 
public: 
	X(){};  // 手动定义默认构造函数
	X(int i){ a = i; }     
}; 
 
X x;   // 正确，默认构造函数 X::X() 存在
```

###### **defaulted 函数提出**

​		为了解决两个问题：1. 减轻程序员的编程工作量；2. 获得编译器自动生成的默认特殊成员函数的高的代码执行效率，C++11 标准引入了一个新特性：defaulted 函数。程序员只需在函数声明后加上“=default;”，就可将该函数声明为 defaulted 函数，编译器将为显式声明的 defaulted 函数自动生成函数体。例如：

```c++
class X
{ 
private: 
	int a; 
public: 
	X()=default;  
	X(int i){ a = i; }     
}; 
```

编译器会自动生成默认构造函数 `X::X(){}`，该函数可以比用户自己定义的默认构造函数获得更高的代码效率。

###### Defaulted 函数的用法及示例

Defaulted 函数特性仅适用于类的特殊成员函数，且该特殊成员函数没有默认参数。例如：Defaulted 函数特性仅适用于类的特殊成员函数，且该特殊成员函数没有默认参数。例如：

```c++
class X { 
public: 
 int f() = default;      // 错误 , 函数 f() 非类 X 的特殊成员函数
 X(int) = default;       // 错误 , 构造函数 X(int, int) 非 X 的特殊成员函数
 X(int = 1) = default;   // 错误 , 默认构造函数 X(int=1) 含有默认参数
};
```

----

##### explicit 关键字

首先explicit的字面翻译是：详述的,明晰的,明确的

```c++
class A
{
public:
    int num_;
    A(int num):num_(num){}
}
```



如果某个自定义类实现了带参数的构造函数，如下所示class A，当显示调用该构造函数时：A a1(1) 可编译成功，创建对象a1。也可以隐式的调用该构造函数：A a2 = 1；创建对象a2。

在构造函数前加上explicit关键字，则规定了程序不能隐式调用该构造函数，即上述A a2 = 1;的写法会编译失败。总结来说，explicit构造函数是用来防止隐式转换的。



````c++
class Test1
{
public:
    Test1(int n)
    {
        num=n;
    }//普通构造函数
private:
    int num;
};
class Test2
{
public:
    explicit Test2(int n)
    {
        num=n;
    }//explicit(显式)构造函数
private:
    int num;
};
int main()
{
    Test1 t1=12;//隐式调用其构造函数,成功
    Test2 t2=12;//编译错误,不能隐式调用其构造函数
    Test2 t2(12);//显式调用成功
    return 0;
}
````

